---
import { formatDate } from '@/lib/utils'
import { Image } from 'astro:assets'
import type { CollectionEntry } from 'astro:content'
import Link from './Link.astro'

const { entry } = Astro.props as {
  entry: CollectionEntry<'shot'>
}
const formattedDate = formatDate(entry.data.date)
---

<div
  class="not-prose h-full rounded-xl border p-4 transition-colors duration-300 ease-in-out hover:bg-secondary/50"
>
  <Link href={`/shots/${entry.id}`} class="flex flex-col gap-4">
    {
      entry.data.cover && (
        <div>
          <Image src={entry.data.cover} alt={entry.data.title} />
        </div>
      )
    }
    <div class="flex-grow">
      <p
        class="mb-1 flex flex-wrap items-center gap-x-2 text-xs text-muted-foreground"
      >
        {formattedDate}
      </p>
      <h3 class="mb-1 text-lg font-semibold">
        {entry.data.title}
      </h3>
      <p class="pb-1 text-sm text-muted-foreground">
        {entry.data.description}
      </p>
    </div>
  </Link>
</div>
